<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.ibrasoft.jdriveclonr.ui.ConfigController"
            prefWidth="900" prefHeight="600"
            minWidth="800" minHeight="700"
            stylesheets="@../styles/dark/config.css">

    <!-- Header -->
    <top>
        <VBox styleClass="config-header" spacing="4">
            <Label text="Download Configuration" styleClass="title-medium"/>
            <Label text="Configure how your files will be downloaded and converted" styleClass="subtitle"/>
        </VBox>
    </top>

    <!-- Main Content -->
    <center>
        <VBox styleClass="config-content" spacing="12">
            
            <!-- Destination Directory Card -->
            <VBox styleClass="card">
                <VBox styleClass="config-card-content" spacing="8">
                    <Label text="Destination Directory" styleClass="title-small"/>
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <TextField fx:id="destinationField" HBox.hgrow="ALWAYS" 
                                  styleClass="text-field"
                                  promptText="Select destination folder for downloaded files"/>
                        <Button fx:id="browseButton" text="Browse..." styleClass="secondary-button"/>
                    </HBox>
                </VBox>
            </VBox>

            <!-- Export Format Settings Card -->
            <VBox styleClass="card">
                <VBox styleClass="config-card-content" spacing="10">
                    <VBox spacing="2">
                        <Label text="Export Format Settings" styleClass="title-small"/>
                        <Label text="Choose how Google Workspace files will be converted during download" 
                               styleClass="caption-text"/>
                    </VBox>

                    <GridPane vgap="8" hgap="20">
                        <columnConstraints>
                            <ColumnConstraints minWidth="140" prefWidth="160"/>
                            <ColumnConstraints minWidth="200" prefWidth="240" hgrow="ALWAYS"/>
                        </columnConstraints>

                        <Label text="Google Docs:" GridPane.rowIndex="0" GridPane.columnIndex="0" 
                               styleClass="body-text"/>
                        <ComboBox fx:id="docsFormatBox" GridPane.rowIndex="0" GridPane.columnIndex="1" 
                                 maxWidth="Infinity" styleClass="combo-box"/>

                        <Label text="Google Sheets:" GridPane.rowIndex="1" GridPane.columnIndex="0" 
                               styleClass="body-text"/>
                        <ComboBox fx:id="sheetsFormatBox" GridPane.rowIndex="1" GridPane.columnIndex="1" 
                                 maxWidth="Infinity" styleClass="combo-box"/>

                        <Label text="Google Slides:" GridPane.rowIndex="2" GridPane.columnIndex="0" 
                               styleClass="body-text"/>
                        <ComboBox fx:id="slidesFormatBox" GridPane.rowIndex="2" GridPane.columnIndex="1" 
                                 maxWidth="Infinity" styleClass="combo-box"/>

                        <Label text="Google Drawings:" GridPane.rowIndex="3" GridPane.columnIndex="0" 
                               styleClass="body-text"/>
                        <ComboBox fx:id="drawingsFormatBox" GridPane.rowIndex="3" GridPane.columnIndex="1" 
                                 maxWidth="Infinity" styleClass="combo-box"/>

                        <Label text="Jamboard:" GridPane.rowIndex="4" GridPane.columnIndex="0" 
                               styleClass="body-text"/>
                        <ComboBox fx:id="jamboardFormatBox" GridPane.rowIndex="4" GridPane.columnIndex="1" 
                                 maxWidth="Infinity" styleClass="combo-box"/>
                    </GridPane>
                </VBox>
            </VBox>
            
            <!-- Performance Settings Card -->
            <VBox styleClass="card">
                <VBox styleClass="config-card-content" spacing="10">
                    <VBox spacing="2">
                        <Label text="Performance Settings" styleClass="title-small"/>
                        <Label text="Adjust download performance based on your system and network" 
                               styleClass="caption-text"/>
                    </VBox>
                    
                    <VBox spacing="6">
                        <HBox spacing="16" alignment="CENTER_LEFT">
                            <Label text="Concurrent Downloads:" minWidth="160" styleClass="body-text"/>
                            <Label fx:id="threadCountLabel" text="4 threads" styleClass="body-text"/>
                        </HBox>
                        
                        <Slider fx:id="threadCountSlider" min="1" max="10" value="4" 
                                blockIncrement="1" majorTickUnit="1" minorTickCount="0" 
                                snapToTicks="true" showTickMarks="true" showTickLabels="true"
                                maxWidth="300"/>
                                
                        <Label fx:id="threadWarningLabel" 
                               text="âš  Warning: Using more than 5 threads may cause unpredictable behavior" 
                               styleClass="warning-text" visible="false"/>
                    </VBox>
                </VBox>
            </VBox>

        </VBox>
    </center>

    <!-- Bottom Actions -->
    <bottom>
        <HBox styleClass="config-bottom" spacing="16" alignment="CENTER_RIGHT">
            <Button fx:id="helpButton" text="What can we download?" styleClass="secondary-button"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="Back" onAction="#onBackClicked" styleClass="secondary-button"/>
            <Button text="Start Download!" onAction="#onStartClicked" 
                    defaultButton="true" styleClass="primary-button"/>
        </HBox>
    </bottom>

</BorderPane>
